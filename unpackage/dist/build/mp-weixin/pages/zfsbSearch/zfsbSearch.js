(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/zfsbSearch/zfsbSearch"],{"0360":function(e,t,o){"use strict";o.r(t);var n=o("affb"),a=o.n(n);for(var s in n)"default"!==s&&function(e){o.d(t,e,(function(){return n[e]}))}(s);t["default"]=a.a},"31e3":function(e,t,o){"use strict";(function(e){o("4c46");n(o("66fd"));var t=n(o("5683"));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o("543d")["createPage"])},5545:function(e,t,o){"use strict";var n=o("d2a4"),a=o.n(n);a.a},5683:function(e,t,o){"use strict";o.r(t);var n=o("8553"),a=o("0360");for(var s in a)"default"!==s&&function(e){o.d(t,e,(function(){return a[e]}))}(s);o("5545");var i,c=o("f0c5"),r=Object(c["a"])(a["default"],n["b"],n["c"],!1,null,"60349490",null,!1,n["a"],i);t["default"]=r.exports},8553:function(e,t,o){"use strict";var n={uniHeader:function(){return o.e("components/uni-header/uni-header").then(o.bind(null,"681c"))}},a=function(){var e=this,t=e.$createElement;e._self._c},s=[];o.d(t,"b",(function(){return a})),o.d(t,"c",(function(){return s})),o.d(t,"a",(function(){return n}))},affb:function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(o("0c60")),a=s(o("da1a"));function s(e){return e&&e.__esModule?e:{default:e}}var i={data:function(){return{title:"走访上报",checked:!0,cardId:"",authcode:"",byBool:!1}},onShow:function(){},onLoad:function(){},mounted:function(){this.getCode()},methods:{back:function(){e.navigateBack({delta:1})},search:function(){e.navigateTo({url:"../zfsbReport/zfsbReport"})},checkId:function(){var e=/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{1}[0-9Xx]\d{1}[0-9Xx]$/,t=/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{1}[0-9Xx]\d{1}[0-9Xx][1-7][1-4]$/;return e.test(this.cardId)||t.test(this.cardId)},getUser:function(){var t=this;e.getStorageSync("nickName")||wx.showModal({title:"温馨提示",content:"正在请求您的个人信息",success:function(o){if(o.confirm)wx.getUserProfile({desc:"获取你的昵称、头像、地区及性别",success:function(t){console.log(t),e.setStorageSync("nickName",t.userInfo.nickName),e.setStorageSync("avatarUrl",t.userInfo.avatarUrl)},fail:function(e){t.$toast("您拒绝了请求")}});else if(o.cancel)return void t.$toast("您拒绝了请求")}})},getOpenId:function(){var t=this;e.getStorageSync("openId")||e.login({provider:"weixin",success:function(o){console.log("登录成功：",o),t.Code=o.code,console.log(o),e.request({url:n.default.baseUrl+"/GetOpenId?js_code="+o.code+"&tdsourcetag=s_pcqq_aiomsg",method:"post",success:function(t){e.setStorageSync("openId",t.data.openid)}})},fail:function(e){console.log("登录失败：",e)}})},getCode:function(){var t=this;e.request({url:n.default.baseUrl+"/Imagexcx.img?data="+new Date,header:{"Content-Type":"application/x-www-form-urlencoded"},method:"GET",success:function(e){if(console.log(e),"0"==e.data.code){var o=e.data.data.valicode.replace(/\. +/g,"");o=o.replace(/[\r\n]/g,""),t.src=" data:image/jpeg;base64,"+o,t.sessionId=e.data.data.JESSIONID}else t.$toast("验证码获取失败")},fail:function(t){console.log(t),e.showToast({icon:"none",title:"请求出错: "+t,duration:2e3})}})},login:function(){var t=this;if(this.checked?(a.default.set("userName",this.loginName),a.default.set("passWord",this.password)):(a.default.remove("userName"),a.default.remove("passWord")),""==this.loginName)return e.showToast({icon:"none",title:"账号不能为空！",duration:1500}),!1;if(""==this.password)return e.showToast({icon:"none",title:"密码不能为空！",duration:1500}),!1;if(""==this.authcode)return e.showToast({icon:"none",title:"验证码不能为空！",duration:1500}),!1;var o={loginName:this.loginName,passWord:this.password,authCode:this.authcode},s=this;e.showLoading({title:"登录中..."});var i=e.getStorageSync("openId")||"",c=e.getStorageSync("nickName")||"",r=e.getStorageSync("avatarUrl")||"";e.request({url:n.default.baseUrl+"/loginJsonV2",header:{"Content-Type":"application/x-www-form-urlencoded",Cookie:"JSESSIONID="+s.sessionId||!1},data:{"userLoginCmd.loginName":o.loginName,"userLoginCmd.password":o.passWord,"userLoginCmd.checkCode":o.authCode,openId:i,wxName:c,txImg:r},method:"POST",success:function(o){console.log(o.data),e.hideLoading(),"1"==o.data[0].RETCODE&&(t.$store.commit("login",o.data[0].RETDESC),t.$store.commit("setUser",o.data[0].USERNAME),t.$store.commit("setPhone",o.data[0].PHONE),t.$store.commit("setUserId",o.data[0].USERID),wx.redirectTo({url:"../index/index"})),"99"==o.data[0].RETCODE&&(s.$toast(o.data[0].RETDESC),s.getCode()),"-1"==o.data[0].RETCODE&&(s.$toast(o.data[0].RETDESC),s.getCode())},fail:function(t){console.log(t),e.showToast({icon:"none",title:"请求出错: "+t,duration:2e3})}})},oncheckbox:function(e){this.checked=!this.checked}}};t.default=i}).call(this,o("543d")["default"])},d2a4:function(e,t,o){}},[["31e3","common/runtime","common/vendor"]]]);